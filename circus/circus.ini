[circus]
httpd = True
httpd_host = 127.0.0.1
httpd_port = 5000
statsd = True 

endpoint = tcp://127.0.0.1:5555
pubsub_endpoint = tcp://127.0.0.1:5556
stats_endpoint = tcp://127.0.0.1:5557

[plugin:redis_observer]
use = circus.plugins.redis_observer.RedisObserver

[env]
PROJECT_PATH = /home/jatumba/jatumba-backend
VIRTUALENV_DIR = /home/jatumba/.virtualenvs/jatumba

[env:gunicorn]
LOGS_DIR = /home/jatumba/log/gunicorn

[env:daphne]
LOGS_DIR = /home/jatumba/log/daphne

[env:workers]
LOGS_DIR = /home/jatumba/log/workers

[watcher:redis-commander]
cmd = redis-commander
args = -a 127.0.0.1 -p 10000

[watcher:gunicorn]
cmd = gunicorn
args = TPD.wsgi:application --bind=127.0.0.1:8000 --access-logfile $(circus.env.LOGS_DIR)/access.log --error-logfile $(circus.env.LOGS_DIR)/error.log --log-level debug
copy_env = True
virtualenv = $(circus.env.VIRTUALENV_DIR)
virtualenv_py_ver = 3.5
working_dir = $(circus.env.PROJECT_PATH)

[watcher:daphne]
cmd = daphne
args = TPD.asgi:channel_layer --port 9000 --access-log $(circus.env.LOGS_DIR)/access.log
copy_env = True
virtualenv = $(circus.env.VIRTUALENV_DIR)
virtualenv_py_ver = 3.5
working_dir = $(circus.env.PROJECT_PATH)
numprocesses = 1

[watcher:workers]
cmd = $(circus.env.PROJECT_PATH)/manage.py
args = runworker -v 2
copy_env = True
virtualenv = $(circus.env.VIRTUALENV_DIR)
virtualenv_py_ver = 3.5
working_dir = $(circus.env.PROJECT_PATH)
numprocesses = 24

stdout_stream.class = FileStream
stdout_stream.filename = $(circus.env.LOGS_DIR)/stdout.log
stdout_stream.refresh_time = 1

stderr_stream.class = FileStream
stderr_stream.filename = $(circus.env.LOGS_DIR)/stderr.log
stderr_stream.refresh_time = 1

[plugin:flapping]
use = circus.plugins.flapping.Flapping
max_retry = 5
