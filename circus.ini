[circus]
endpoint = tcp://127.0.0.1:5555
pubsub_endpoint = tcp://127.0.0.1:5556
stats_endpoint = tcp://127.0.0.1:5557

[env]
PROJECT_PATH = /home/jatumba/jatumba-backend
VIRTUALENV_DIR = /home/jatumba/.virtualenvs/jatumba

[env:gunicorn]
LOGS_DIR = /home/jatumba/log/gunicorn

[env:daphne]
LOGS_DIR = /home/jatumba/log/daphne

[env:workers]
LOGS_DIR = /home/jatumba/log/workers

[watcher:workers]
cmd = $(circus.env.PROJECT_PATH)/manage.py
args = runworker -v 2
copy_env = True
virtualenv = $(circus.env.VIRTUALENV_DIR)
numprocesses = 2

stdout_stream.class = FileStream
stdout_stream.filename = $(circus.env.LOGS_DIR)/stdout.log
stdout_stream.refresh_time = 1

stderr_stream.class = FileStream
stderr_stream.filename = $(circus.env.LOGS_DIR)/stderr.log
stderr_stream.refresh_time = 1

[watcher:daphne]
cmd = daphne
args = TPD.asgi:channel_layer --port 9000 --access-log $(circus.env.LOGS_DIR)/access.log
copy_env = True
virtualenv = $(circus.env.VIRTUALENV_DIR)

[watcher:gunicorn]
cmd = gunicorn
args = TPD.wsgi:application --access-logfile $(circus.env.LOGS_DIR)/access.log --error-logfile $(circus.env.LOgs_DIR)/error.log --log-level debug --bind=127.0.0.1:8000
copy_env = True
virtualenv = $(circus.env.VIRTUALENV_DIR)
